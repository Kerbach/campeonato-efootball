<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Campeonato eFootball</title>

<style>
*{box-sizing:border-box}

body{
  font-family:system-ui,Arial;
  margin:0;
  background:linear-gradient(135deg,#141420,#2f2f4f);
  color:#fff;
  padding:14px;
}

h1{text-align:center;font-size:22px;margin:10px 0 18px}

.card{
  background:#232336;
  padding:14px;
  margin:14px auto;
  border-radius:14px;
  max-width:700px;
}

.table-wrapper{overflow-x:auto}

table{
  border-collapse:collapse;
  width:100%;
  min-width:460px;
}

th,td{
  padding:8px;
  text-align:center;
  border-bottom:1px solid #444;
}

th{background:#35355a}

input{
  width:55px;
  height:36px;
  font-size:16px;
  text-align:center;
  border-radius:8px;
  border:none;
}

button{
  width:100%;
  max-width:700px;
  margin:20px auto;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#4CAF50;
  color:#fff;
}

/* campe√£o */
#championScreen{
  position:fixed;
  inset:0;
  display:none;
  background:#111;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  font-size:26px;
  text-align:center;
}

.trophy{
  font-size:90px;
  animation:bounce 1s infinite alternate;
}

@keyframes bounce{
  from{transform:translateY(0)}
  to{transform:translateY(-15px)}
}
</style>
</head>

<body>

<h1>üèÜ Campeonato eFootball</h1>

<div class="card">
<h2>üìä Classifica√ß√£o</h2>
<div class="table-wrapper"><table id="ranking"></table></div>
</div>

<div class="card">
<h2>‚öΩ Fase de Grupos</h2>
<div class="table-wrapper"><table id="games"></table></div>
</div>

<div class="card">
<h2>ü•â 3¬∫ Lugar</h2>
<div class="table-wrapper"><table id="third"></table></div>
</div>

<div class="card">
<h2>ü•á Final</h2>
<div class="table-wrapper"><table id="final"></table></div>
</div>

<button onclick="resetAll()">üîÑ Resetar campeonato</button>

<div id="championScreen">
  <div class="trophy">üèÜ</div>
  <div id="championName"></div>
</div>

<script>
const players=["Walter","Luis","Bolacha","Mateus"];

const matches=[
["Walter","Luis"],["Bolacha","Mateus"],
["Walter","Bolacha"],["Luis","Mateus"],
["Walter","Mateus"],["Luis","Bolacha"],
["Luis","Walter"],["Mateus","Bolacha"],
["Bolacha","Walter"],["Mateus","Luis"],
["Mateus","Walter"],["Bolacha","Luis"]
];

let results=JSON.parse(localStorage.getItem("results")||"{}");
let finalData=JSON.parse(localStorage.getItem("final")||"{}");
let thirdData=JSON.parse(localStorage.getItem("third")||"{}");

function save(){
 localStorage.setItem("results",JSON.stringify(results));
 localStorage.setItem("final",JSON.stringify(finalData));
 localStorage.setItem("third",JSON.stringify(thirdData));
}

function getPoints(a,b){
 if(a===b)return[1,1];
 const d=Math.abs(a-b);
 if(a>b)return[d>=2?3:2,0];
 return[0,d>=2?3:2];
}

function calculate(){
 const t={};
 players.forEach(p=>t[p]={pts:0,g:0,s:0});

 matches.forEach((m,i)=>{
  const r=results[i];
  if(!r)return;
  const[g1,g2]=r;
  const[p1,p2]=getPoints(g1,g2);

  t[m[0]].pts+=p1; t[m[1]].pts+=p2;
  t[m[0]].g+=g1; t[m[1]].g+=g2;
  t[m[0]].s+=g1-g2; t[m[1]].s+=g2-g1;
 });

 return Object.entries(t)
  .sort((a,b)=>b[1].pts-a[1].pts||b[1].s-a[1].s||b[1].g-a[1].g);
}

function renderRanking(){
 const rank=calculate();
 const el=document.getElementById("ranking");

 el.innerHTML="<tr><th>#</th><th>Jogador</th><th>Pts</th><th>SG</th><th>Gols</th></tr>";

 rank.forEach((r,i)=>{
  el.innerHTML+=`<tr>
   <td>${i+1}</td><td>${r[0]}</td>
   <td>${r[1].pts}</td><td>${r[1].s}</td><td>${r[1].g}</td>
  </tr>`;
 });

 renderFinals(rank);
}

function renderGames(){
 const el=document.getElementById("games");

 el.innerHTML="<tr><th>#</th><th>Time A</th><th></th><th></th><th></th><th>Time B</th></tr>";

 matches.forEach((m,i)=>{
  const r=results[i]||["",""];
  el.innerHTML+=`
  <tr>
   <td>${i+1}</td>
   <td>${m[0]}</td>
   <td><input value="${r[0]}" onchange="upd(${i},0,this.value)"></td>
   <td>x</td>
   <td><input value="${r[1]}" onchange="upd(${i},1,this.value)"></td>
   <td>${m[1]}</td>
  </tr>`;
 });
}

function upd(i,p,v){
 if(!results[i])results[i]=["",""];
 results[i][p]=Number(v);
 save();
 renderRanking();
}

function renderFinals(rank){
 const [a,b,c,d]=rank.map(r=>r[0]);

 document.getElementById("third").innerHTML=`
 <tr>
  <td>${c}</td>
  <td><input value="${thirdData[0]||""}" onchange="setThird(0,this.value)"></td>
  <td>x</td>
  <td><input value="${thirdData[1]||""}" onchange="setThird(1,this.value)"></td>
  <td>${d}</td>
 </tr>`;

 document.getElementById("final").innerHTML=`
 <tr>
  <td>${a}</td>
  <td><input value="${finalData[0]||""}" onchange="setFinal(0,this.value)"></td>
  <td>x</td>
  <td><input value="${finalData[1]||""}" onchange="setFinal(1,this.value)"></td>
  <td>${b}</td>
 </tr>`;
}

function setThird(p,v){
 thirdData[p]=Number(v); save();
}

function setFinal(p,v){
 finalData[p]=Number(v); save();

 if(finalData[0]!=null && finalData[1]!=null){
  const champ= finalData[0]>finalData[1]?calculate()[0][0]:calculate()[1][0];
  showChampion(champ);
 }
}

function showChampion(name){
 const s=document.getElementById("championScreen");
 document.getElementById("championName").innerText="CAMPE√ÉO: "+name;
 s.style.display="flex";
 setTimeout(()=>s.style.display="none",4000);
}

function resetAll(){
 if(confirm("Apagar tudo?")){
  localStorage.clear();
  location.reload();
 }
}

renderGames();
renderRanking();
</script>

</body>
</html>
